# YML format run control file for single mission SEC processing
#    - note environment variables may be used using ${var} syntax

# ------------------------------------------------------------------------------------
# Mission Parameters
# ------------------------------------------------------------------------------------

mission: cs2 # e1, e2, ev, s3a, s3b, cs2

# ------------------------------------------------------------------------------------
# Data Set Parameters
# ------------------------------------------------------------------------------------

dataset: cryotempo_c001 # cryotempo_c001, fdgr4alt, etc
#l2_directory: ${CPDATA_DIR}/SATS/RA/CRY/Cryo-TEMPO/BASELINE-C/001/LAND_ICE/GREENL # str: base directory 
l2_directory: /raid5/cryo-tempo/product_baselines/C/001/LAND_ICE/GREENL
                                # to resursively search for L2 files using search_pattern below
search_pattern: '**/CS_OFFL_SIR_TDP_LI*C001*.nc'  # str: File glob recursive search pattern, e.g. '**/*.nc'
latitude_param: latitude        # latitude name in netcdf. example: data/ku/latitude
longitude_param: longitude      # longitude name in netcdf. example: data/ku/longitude
elevation_param: elevation      # elevation parameter in netcdf. / for groups
power_param: backscatter        # power (backscatter) parameter in netcdf. / for groups
time_param: time                # time parameter in netcdf. / for groups
time_secs_to_1950: -1577836800  # time constant in seconds to adjust to 00:00 1/1/1950
yyyymm_str_fname_indices: [-48,-42] # indices of the start YYYYMM in the filename from end of name

# ------------------------------------------------------------------------------------
# Gridding Parameters
# ------------------------------------------------------------------------------------
grid_name: greenland            # str: GridArea name, e.g., greenland, antarctica
area_filter: greenland_is       # str: CPOM area name, used for masking input measurements
                                #      examples: greenland_is, antarctica_is
bin_size: 5000                  # int: Grid bin size in m, example: 5000

grid_output_dir:  /cpnet/altimetry/landice/gridded_altimetry       
                                # Path of grid output dir containing parquets that is created
                                # <grid_output_dir>/<mission>/<grid_name>_<binsize/1000>km_<dataset>


partition_by_month: False
# If set to True, the Parquet dataset will be partitioned by both year and month
# (in addition to the coarser spatial partitions defined below). This results in a folder
# hierarchy such as year=YYYY/month=MM/x_part=.../y_part=... . Note that finer partitioning
# (i.e. by month) may significantly increase the number of output files, which can increase
# write times and, for very large datasets, potentially affect read performance depending
# upon the query types.

partition_xy_chunking: 20
# This parameter sets the chunking factor for spatial partitioning.
# Individual grid cells (identified by x_bin and y_bin) are grouped into larger partitions 
# by dividing them by this factor. For example, a value of 20 means that the coarser partition 
# columns (x_part, y_part) will be computed as x_bin//20 and y_bin//20.
# Adjust this value to control the trade-off between file size and number of partitions.
